II. SQL言語 第7章 問い合わせ
==================

### 7.3 選択リスト

前節までで、SELECTコマンド中のテーブル式でデータを取得するための仮想テーブルを作った。
このテーブルに対して、最終的に選択リストからどの列を実際に出力するかを決める。

- 最も単純な選択リスト `*`
- カンマで区切られた評価式のリスト
- テーブルの列名、列名に対する別名
- ２つ以上のテーブルで同じ名前の列がある場合は、テーブル名を指定しなければならない
    - `tbl1.a, tbl2.a, tbl1.b, FROM...`
- 選択リストの四季はテーブル式内の列を参照する必要はない

#### 7.3.2 列ラベル

- 選択リストの中の項目は、名前を割り当てることができる
- ASは省略可能
- PostgreSQLキーワードと一致するラベルは、二重引用符で囲むことで使用可能

#### 7.3.3 DISTINCT

- 重複行をのぞいた出力を取得
- DISTINCT ON で一致するための評価を行うことができる

### 練習 7-5

emp表から列ラベルを使ってjobの重複のない一覧を「役職」という列タイトルで取得する。

- `\i /vagrant/sql/emp-dept.sql`を使ってemp表を作成しておく
```
   役職
-----------
 CLERK
 SALESMAN
 MANAGER
 PRESIDENT
 ANALYST
```

### 練習 7-6

emp表から各job別の代表社員を1名選んでjob別代表社員一覧を出力せよ。
job内の代表社員はjob内の任意の1社員とし結果は不確定でもよいものとする。

- `\i /vagrant/sql/emp-dept.sql`を使ってemp表を作成しておく
- DISTINCT ONを使用して、jobの一致を重複とみなす
- 応用:同じ結果をDISTINC ONを使わずに書いてみる
    - DISTINCT ONは使わないがDISTINCTは可のパターン
    - DISTINCTもWINDOW関数も使わないパターン

```
   役職    | 代表社員
-----------+----------
 ANALYST   | SCOTT
 CLERK     | JAMES
 MANAGER   | JONES
 PRESIDENT | KING
 SALESMAN  | TURNER
```

### 7.4 問い合わせの結合

### 7.5 行の並べ替え

### 7.6 LIMITとOFFSET

### 7.7 VALUESリスト

### 7.8 WITH 問い合わせ（共通テーブル式）
