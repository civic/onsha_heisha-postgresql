II. SQL言語 第6章 データ操作
==================

前章では、データを保持するためのテーブルや制約について学んだ。
この章では、データを挿入、更新、削除する方法について学ぶ。


### 6.1 データの挿入

#### 概要

- テーブルにデータを挿入するにはINSERTを使う
- 1行単位で挿入可能。列の一部のみ挿入というのはできない（1行として挿入される）
- テーブル内の列順序を知っていれば、列を列挙しなくても良い
    - 列を明示的に列挙すれば、テーブルの列順序にあっていなくてもよい
    - 常に列名を列挙するほうがよい
- デフォルト値の挿入(キーワードDEFAULT)
    - VALUES( .... DEFAULT)
    - 行全体デフォルト値。DEFAULT VALUES
- 複数行挿入
- 問い合わせ結果の挿入

### 6.2 データの更新

#### 概要

- すでにデータベースに入っているデータを更新
    - 個別の行
    - すべての行
    - すべての行のサブセット
- WHERE句で更新される行の条件を指定する
    - 更新される行が0件でも多数でもよい
    - 0件であってもエラーではない
- 新しい値を指定する式で、古い値を参照することができる
    - SET price = price * 1.10
- 複数の代入式を列挙して、復数の列を更新することもできる
    - SET a=5, b=3, c-1

### 6.3 データの削除

#### 概要

- データの追加が行単位でしか行えないのと同様、削除も行単位でのみ可能
- WHERE句で削除対象の行の条件を指定
    - UPDATE と同様

### 6.4 更新された行のデータを返す

#### 概要

- RETURNINGで追加・更新・削除された行の情報を得る
- INSERT, UPDATE, DELETEは結果を返さないが、RETURNINGでSELECTのように結果を返せる
- 採番されたserial列のidの情報
- トリガーがある場合は、トリガーで更新された結果が返される 


### 練習 6-1

INSERT でDEFAULTとRETURNINGを使う。

- テーブル: tbl_ins_ret
    - id serial primary key
    - name text
- 行を列挙せずにVALUESだけでINSERTを行う
- 複数行の挿入を1コマンドで行う
- 挿入後に挿入されたidをRETURNINGで得る
